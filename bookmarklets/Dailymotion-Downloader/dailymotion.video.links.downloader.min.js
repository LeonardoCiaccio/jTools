!function(e){function o(e,t,r){try{if(t.addEventListener)t.addEventListener(e,r,!1);else if(t.attachEvent){t.attachEvent("on"+e,r)}return!0}catch(i){return!1}}if(!e)return!1;var t=new RegExp("^http(?:s?)://www.dailymotion.com/embed/video/","gi"),r=new RegExp("^http(?:s?)://www.dailymotion.com/video/","gi");window.DM={links:function(){var e=[];try{info&&(info.stream_h264_hd1080_url&&e.push({url:info.stream_h264_hd1080_url,type:"HD 1080"}),info.stream_h264_hd_url&&e.push({url:info.stream_h264_hd_url,type:"1280 x 720"}),info.stream_h264_hq_url&&e.push({url:info.stream_h264_hq_url,type:"848 x 480"}),info.stream_h264_url&&e.push({url:info.stream_h264_url,type:"512 x 384"}),info.stream_h264_ld_url&&e.push({url:info.stream_h264_ld_url,type:"320 x 240"}),info.stream_hls_url&&e.push({url:info.stream_hls_url,type:"M3U8"}))}catch(t){}return e},compat:function(t){t=t||"<a href='%U' title='%M'>%T</a>";for(var r=DM.links(),o=[],i=new RegExp("%U","gi"),n=new RegExp("%T","gi"),a=new RegExp("%M","gi"),l=0;l<r.length;l++){var h=t.replace(i,r[l].url).replace(n,r[l].type).replace(a,e.title);o.push(h)}return o},download:{button:function(){if(t.test(e.location.href)===!0){var i="DM-Links-Downloader";if(e.querySelector("#"+i))return!1;var n=e.createElement("div"),a=["width:100%","height:100%","top:0px","left:0px","background-color:rgba(255, 255, 255, 0.76)","overflow:hidden","z-index:9999999999","position:fixed"].join(";"),l=e.createElement("div"),h=["font-size: 11px","width:70px","height:auto","max-height:160px","top:50%","left:50%","margin-top:-80px","margin-left:-35px","background-color:white","box-shadow: 1px 1px 14px 1px #333333","padding:2em","overflow:auto","z-index:99999999999","position:fixed","text-align:left","color:black"].join(";"),d=DM.compat("<p style='margin-bottom: 3px;'><a onclick=\"alert( 'Right click then save as ...' );return false;\" href='%U' title='%M' style='text-decoration:none'>[ %T ]</a></p>",!0);n.setAttribute("style",a),n.setAttribute("id",i),e.body.appendChild(n),d=d.length>0?d.join(""):"<p>No Links :(</p>",l.setAttribute("style",h),l.innerHTML=d,e.body.appendChild(l),o("click",n,function(){l.parentNode.removeChild(l),this.parentNode.removeChild(this)})}else if(r.test(e.location.href)){var u=e.location.href.replace(r,"").trim();alert("Now i open new tab with good link then restart this bookmarklet !"),window.open("http://www.dailymotion.com/embed/video/"+u)}else alert("Use this bookmarklet on :\r\n http://www.dailymotion.com/video/($video $code)\r\n http://www.dailymotion.com/embed/video/($video $code)");return void 0}}}}(document);