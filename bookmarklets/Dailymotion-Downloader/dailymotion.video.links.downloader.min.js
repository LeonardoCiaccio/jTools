!function(e){function n(e,t,r){try{if(t.addEventListener)t.addEventListener(e,r,!1);else if(t.attachEvent){t.attachEvent("on"+e,r)}return!0}catch(i){return!1}}if(!e)return!1;var t=/^http(?:s?):\/\/www\.dailymotion\.com\/embed\/video\//gi,r=/^http(?:s?):\/\/www\.dailymotion\.com\/video\//gi;window.DM={links:function(){var r=[];if(e.location.href.match(t))try{info&&(info.stream_h264_hd1080_url&&r.push({url:info.stream_h264_hd1080_url,type:"HD 1080"}),info.stream_h264_hd_url&&r.push({url:info.stream_h264_hd_url,type:"1280 x 720"}),info.stream_h264_hq_url&&r.push({url:info.stream_h264_hq_url,type:"848 x 480"}),info.stream_h264_url&&r.push({url:info.stream_h264_url,type:"512 x 384"}),info.stream_h264_ld_url&&r.push({url:info.stream_h264_ld_url,type:"320 x 240"}),info.stream_hls_url&&r.push({url:info.stream_hls_url,type:"M3U8"}))}catch(n){}return r},compat:function(t){t=t||"<a href='%U' title='%M'>%T</a>";for(var r=DM.links(),n=[],i=new RegExp("%U","gi"),o=new RegExp("%T","gi"),a=new RegExp("%M","gi"),l=0;l<r.length;l++){var p=t.replace(i,r[l].url).replace(o,r[l].type).replace(a,e.title);n.push(p)}return n},download:{button:function(){if(e.location.href.match(t)){var i="DM-Links-Downloader";if(e.querySelector("#"+i))return!1;var o=e.createElement("div"),a=["width:100%","height:100%","top:0px","left:0px","background-color:rgba(255, 255, 255, 0.76)","overflow:hidden","z-index:9999999999","position:fixed"].join(";"),l=e.createElement("div"),p=["font-size: 11px","width:70px","height:auto","max-height:160px","top:50%","left:50%","margin-top:-80px","margin-left:-35px","background-color:white","box-shadow: 1px 1px 14px 1px #333333","padding:2em","overflow:auto","z-index:99999999999","position:fixed","text-align:left","color:black"].join(";"),c=DM.compat("<p style='margin-bottom: 3px;'><a onclick=\"alert( 'Right click then save as ...' );return false;\" href='%U' title='%M' style='text-decoration:none'>[ %T ]</a></p>",!0);o.setAttribute("style",a),o.setAttribute("id",i),e.body.appendChild(o),c=c.length>0?c.join(""):"<p>No Links :(</p>",l.setAttribute("style",p),l.innerHTML=c,e.body.appendChild(l),n("click",o,function(){l.parentNode.removeChild(l),this.parentNode.removeChild(this)})}else if(e.location.href.match(r)){var d=e.location.href.replace(r,"").trim();alert("Now i open new tab with good link then restart this bookmarklet !"),window.open("http://www.dailymotion.com/embed/video/"+d)}else alert("Use this bookmarklet on :\r\n http://www.dailymotion.com/video/($video $code)\r\n http://www.dailymotion.com/embed/video/($video $code)");return void 0}}}}(document);