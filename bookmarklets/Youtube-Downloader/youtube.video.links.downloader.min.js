!function(e,t){function i(e){return e?e.toUpperCase().indexOf("VIDEO/MP4")>-1?"MP4":e.toUpperCase().indexOf("VIDEO/WEBM")>-1?"WEBM":e.toUpperCase().indexOf("VIDEO/3GPP")>-1?"3GP":e.toUpperCase().indexOf("VIDEO/X-FLV")>-1?"FLV":"FLV":"unkown"}function o(e,t,r){try{if(t.addEventListener)t.addEventListener(e,r,!1);else if(t.attachEvent){t.attachEvent("on"+e,r)}return!0}catch(a){return!1}}function p(e,t){return t=t||"+",e.trim().replace(/[^a-z 0-9]+/gi,"").replace(/ /gi,t)}function l(t){return e.title?p(e.title.trim()+n,t):p("Youtube Video"+n,t)}if(!e)return!1;var r=/^http(?:s?):\/\/www\.youtube\.com\/watch\?v\=/gi,n=" by Grab Any Media";window.YT={links:function(){var e,r=[];if(!t)return r;try{e=t.config.args.url_encoded_fmt_stream_map}catch(n){return r}try{for(var a=e.split(","),i=0;i<a.length;i++){for(var o=a[i].split("&"),p={},l=0;l<o.length;l++){var c=o[l].split("="),u=decodeURIComponent(c[0].toUpperCase()),s=decodeURIComponent(c[1]);switch(u){case"TYPE":p.type=s;break;case"QUALITY":p.quality=s;break;case"URL":p.url=s}}p.type&&p.quality&&p.url&&r.push(p)}return r}catch(n){return r}},compat:function(e,t){e=e||"<a href='%U' data-quality='%Q' title='%F'>[ %T ][ %Q ]</a>",t=t||!1;for(var r=YT.links(),n=[],a=new RegExp("%Q","gi"),o=new RegExp("%U","gi"),p=new RegExp("%F","gi"),c=new RegExp("%T","gi"),u=0;u<r.length;u++){var s=l(" ")+"."+i(r[u].type).toLowerCase();r[u].url=r[u].url+"&title="+l();var d=e.replace(a,r[u].quality).replace(o,r[u].url).replace(p,s).replace(c,i(r[u].type).toUpperCase());n.push(d)}return n},download:{button:function(){if(!r.test(e.location.href))return void alert("Use this bookmarklet on :\r\n https://www.youtube.com/watch?v=($video $code)");var t="YT-Links-Downloader";if(e.querySelector("#"+t))return!1;var n=e.createElement("div"),a=["width:100%","height:100%","top:0px","left:0px","background-color:rgba(255, 255, 255, 0.76)","overflow:hidden","z-index:9999999999","position:fixed"].join(";"),i=e.createElement("div"),p=["width:120px","height:auto","max-height:160px","top:50%","left:50%","margin-top:-80px","margin-left:-60px","background-color:white","box-shadow: 1px 1px 14px 1px #333333","padding:2em","overflow:auto","z-index:99999999999","position:fixed","text-align:left"].join(";"),l=YT.compat("<p style='margin-bottom: 3px;'><a href='%U' title='%F' download='%F'>[%Q][%T]</a></p>",!0);return n.setAttribute("style",a),n.setAttribute("id",t),e.body.appendChild(n),l=l.length>0?l.join(""):"<p>No Links :(</p>",i.setAttribute("style",p),i.innerHTML=l,e.body.appendChild(i),void o("click",n,function(){i.parentNode.removeChild(i),this.parentNode.removeChild(this)})},external:function(t){if(!r.test(e.location.href))return void alert("Use this bookmarklet on :\r\n https://www.youtube.com/watch?v=($video $code)");if(!t)return void 0;var n=e.location.href.split("watch?");if(2!=n.length)return!1;for(var a=n[1].split("&"),i=0;i<a.length;i++)if(a[i].indexOf("v=")>-1){var o=a[i].replace("v=","").trim(),p=t.replace(/(%E)/gi,o);window.open(p);break}return void 0}}}}(document,window.ytplayer);